#!/usr/bin/env perl6




use v6;
use TXN;




# -----------------------------------------------------------------------------
# main
# -----------------------------------------------------------------------------

multi sub MAIN(Str:D :$txnbuild! where .so --> Nil)
{
    my Str:D $file = resolve-path($txnbuild);
    mktxn(:$file, :release);
}

multi sub MAIN(Str :txnbuild($) --> Nil)
{
    my Str:D $file = 'TXNBUILD';
    mktxn(:$file, :release);
}

sub resolve-path(Str:D $path where .so --> Str:D)
{
    my Str:D $resolve-path = ~$path.subst(/^'~/'/, "$*HOME/").IO.resolve;
}




# -----------------------------------------------------------------------------
# usage
# -----------------------------------------------------------------------------

sub USAGE(--> Nil)
{
    constant $HELP = q:to/EOF/.trim;
    Usage:
      mktxn [--txnbuild=<path>]

    Options:
      -h, --help         print this help message
      --txnbuild=<path>  path to TXNBUILD
    EOF
    say($HELP);
}

# vim: set filetype=perl6 foldmethod=marker foldlevel=0:
